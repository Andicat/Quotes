var orderLink,closeButtonLink,close,userName,userEmail,messageContent,timerId,messageLink=document.querySelector(".message"),mapLink=document.querySelector(".map"),messageForm=document.querySelector(".modal-message"),mapForm=document.querySelector(".modal-map"),orderForm=document.querySelector(".modal-order"),closeOrderFormContinue=orderForm.querySelector(".continue"),orderLinksList=document.querySelectorAll(".item-buy"),closeButtonsList=document.querySelectorAll(".modal-button-close"),isStorageSupport=!0,storageuserName="",storageuserEmail="",storagemessageContent="";try{storageuserName=localStorage.getItem("userName"),storageuserEmail=localStorage.getItem("userEmail"),storagemessageContent=localStorage.getItem("messageContent")}catch(e){isStorageSupport=!1}messageLink&&(userName=messageForm.querySelector("[id=name]"),userEmail=messageForm.querySelector("[id=email]"),messageContent=messageForm.querySelector("[id=content]"),messageLink.addEventListener("click",function(e){e.preventDefault(),messageForm.classList.add("modal-show"),userName.focus()}),messageForm.addEventListener("submit",function(e){userName.value&&userEmail.value&&""!=messageContent.value?isStorageSupport&&(localStorage.setItem("userName",userName.value),localStorage.setItem("userEmail",userEmail.value)):(e.preventDefault(),console.log("Заполните ваше имя, обратный электронный адрес и текст письма"),messageForm.classList.remove("modal-error"),messageForm.offsetWidth=messageForm.offsetWidth,messageForm.classList.add("modal-error"),userName.value?userEmail.value?""==messageContent.value&&messageContent.focus():userEmail.focus():userName.focus())})),mapLink&&mapLink.addEventListener("click",function(e){e.preventDefault(),mapForm.classList.add("modal-show")});for(var i=0;i<orderLinksList.length;i++)(orderLink=orderLinksList[i]).addEventListener("click",function(e){e.preventDefault(),orderForm.classList.add("modal-show"),clearTimeout(timerId),timerId=setTimeout(function(){orderForm.classList.remove("modal-show")},5e3)});for(i=0;i<closeButtonsList.length;i++)(closeButtonLink=closeButtonsList[i]).addEventListener("click",function(e){(close=e.target).parentNode.classList.contains("modal-show")&&close.parentNode.classList.remove("modal-show"),close.parentNode.classList.contains("modal-error")&&close.parentNode.classList.remove("modal-error")});closeOrderFormContinue.addEventListener("click",function(e){e.preventDefault(),orderForm.classList.remove("modal-show")}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),messageForm&&messageForm.classList.contains("modal-show")&&(messageForm.classList.remove("modal-show"),messageForm.classList.remove("modal-error")),mapForm&&mapForm.classList.contains("modal-show")&&mapForm.classList.remove("modal-show"),orderForm&&orderForm.classList.contains("modal-show")&&orderForm.classList.remove("modal-show"))});